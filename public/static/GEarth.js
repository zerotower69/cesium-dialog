!function(e,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i():"function"==typeof define&&define.amd?define(i):(e="undefined"!=typeof globalThis?globalThis:e||self).GEarth=i()}(this,function(){"use strict";var e,c={getEarthCoordinates(c,C){let e=new Cesium.ScreenSpaceEventHandler(c.scene.canvas);e.setInputAction(function(u){u=new Cesium.Cartesian2(u.endPosition.x,u.endPosition.y);if(u){u=c.scene.globe.pick(c.camera.getPickRay(u),c.scene);if(u){var w=c.scene.globe.ellipsoid.cartesianToCartographic(u);if(w){let e=c.scene.globe.getHeight(w),i=Math.sqrt(c.scene.camera.positionWC.x*c.scene.camera.positionWC.x+c.scene.camera.positionWC.y*c.scene.camera.positionWC.y+c.scene.camera.positionWC.z*c.scene.camera.positionWC.z),t=Math.sqrt(u.x*u.x+u.y*u.y+u.z*u.z),r=[w.longitude/Math.PI*180,w.latitude/Math.PI*180],s=(e=e||0,i=i||0,t=t||0,r=r||[0,0],c.scene.camera.positionCartographic);var u=Cesium.Math.toDegrees(s.longitude).toFixed(6),w=Cesium.Math.toDegrees(s.latitude).toFixed(6),l=s.height.toFixed(2);let a=Cesium.Math.toDegrees(c.scene.camera.heading),o=Cesium.Math.toDegrees(c.scene.camera.pitch),n=Cesium.Math.toDegrees(c.scene.camera.roll);u="相机坐标:("+u+","+w+","+l+") ,H:"+a.toFixed(2)+",P:"+o.toFixed(2)+",R:"+n.toFixed(2),w="视角海拔高度:"+(i-t).toFixed(2)+"米  海拔:"+e.toFixed(2)+"米  经度："+r[0].toFixed(6)+" 纬度："+r[1].toFixed(6);w+=" --- "+u,"function"==typeof C&&C(w)}}}},Cesium.ScreenSpaceEventType.MOUSE_MOVE)},change3DTilesetHeight(e,r){e.readyPromise.then(function(e){var i,t;r=Number(r),isNaN(r)||0!=r&&(t=e.boundingSphere,t=Cesium.Cartographic.fromCartesian(t.center),i=Cesium.Cartesian3.fromRadians(t.longitude,t.latitude,t.height),t=Cesium.Cartesian3.fromRadians(t.longitude,t.latitude,t.height+r),t=Cesium.Cartesian3.subtract(t,i,new Cesium.Cartesian3),e.modelMatrix=Cesium.Matrix4.fromTranslation(t))})},getNorthPointByDistance(e,i,t,r){e=Cesium.Transforms.eastNorthUpToFixedFrame(e);return Cesium.Matrix4.multiplyByPoint(e,Cesium.Cartesian3.fromElements(i,t,r),new Cesium.Cartesian3)},computeDirectionbyPoint(e,i){i=Cesium.Cartesian3.subtract(i,e,new Cesium.Cartesian3);return Cesium.Cartesian3.normalize(i,new Cesium.Cartesian3)},Cartesian3_to_WGS84(e){e=new Cesium.Cartesian3(e.x,e.y,e.z),e=Cesium.Cartographic.fromCartesian(e);return{latitude:Cesium.Math.toDegrees(e.latitude),longitude:Cesium.Math.toDegrees(e.longitude),height:e.height}},getLonLatByPosition(e,i,t){var e=Cesium.Cartographic.fromCartesian(e),r=Cesium.Math.toDegrees(e.longitude),s=Cesium.Math.toDegrees(e.latitude);let a=Cesium.Math.toDegrees(e.height);return 1==i?(null==t&&(t=0),a=this.getGroundHeight(r,s)+t):0==i&&(a=this.getGroundAttrHeight(r,s)+t),{X:r,Y:s,Z:a}},getGroundAttrHeight(e,i){let t=this.viewer;e=new Cesium.Cartographic.fromDegrees(e,i);return t.scene.sampleHeight(e)},getGroundHeight(e,i){let t=this.viewer;e=new Cesium.Cartographic.fromDegrees(e,i);return t.scene.globe.getHeight(e)}},s=["jsjiami.com.v6","d8KPMR5Hw57CosOlw7M=","Q8KtZGExwpM=","fcOOA8OCD8OxwpI=","wrjCmMKpw6tcAMOYwqg=","TcKNXgB8fsOQ","eBTCh8OvIA==","TcKCLMK0Fw==","wo3DonzCqD8=","JcO9bnY9IRfDsw==","w4bDqTHCnlREwq8=","PcOgw4HCi0oMIMK2wpY=","woYAMhLDrsOwUw==","QcKAG8K+ImPCgMKCw7c=","J0kUNjfDjMO0w7Yz","RUdpwocQw7I5","w5EEwr/CscKuwqcFZ0Y=","WsKacnMx","w6UIbMOEwr0sMgpE","djbDiw/Do34cPcOk","wq7DqcOAwqkC","J0kUNjfDjMO0w7Yy","w6jDnTnCrgk6PzXCuQ==","SsKJMxFWw7rCu8Okw48=","wpjChxpZXw==","VMKDJxlWw7rCu8Okw44=","wosSPijDqsOkREjCpA==","A8KmRx9L","MsOGBj0Y","OsK2YMOYKg==","w73DryLClV9swqog","w6FlJB0wwpvCgQY=","w4vDvsOcw6IZw60lw6I=","E3k5w492wrdm","CQXDqMOawoo=","w7TDnSvCoz4mKzXCrBUG","wrIJF05kw6p4w70=","bsOFwqca","w5QpQmZL","wrfCjB9ndw==","dCPDusKgw4TDoFpZ","BcKDwoJtw4Yge0E=","EsOsw4fCgFsoN8Kj","wpHCuD1gYDws","wrAzb2MUwopewrk=","wrjCiMKzw7xLLsOcwqs=","TS/DiCshw7J2","YjXDiyovw6ZkHFrDv8KS","RyDDgxvDpXQPKw==","SX/DhsKD","wr0GIRnDpcOYVlA=","G8OMPxAkwqpc","cMKGCcK9M0fCl8KX","wqXChcKrw65AYnDDnA==","PTnDncOywoPDsxR5asO9w4w=","GsOIPxAYwqpXLcKDw5LDuknCmsO6GsO8AsKzIwYiVAE=","RH/CqBTDlsKQ","e8ODwqsZwq4AeVZdLsKOWVI=","WcOnw7HCjMOA","w6bDnhjCvF8=","w4k3wqLCn8Ke","wokkKDjDiw==","wogNISjDqg==","AMOuw4bCkFcdYg==","woIldnUYwrdTwrDDlA3CnsOmfEZK","XcOAH8OCD8O6wo/DknXCrQ==","ZiHDu8Kww4jDlQ8=","IMO6w57CllcVOsKqwox4PhQZWWE=","SnHCoRTDiMK8wpPDnmjDuEE=","YkN9wpobw6Q0wrBFw58=","w7sDRcOpwqQ=","RybDvx7DsnIO","w5IUwrTCpMKzwr4fe15zwovCqwrCt8Ox","I8KmaSNpw6cWMsK+ZTU=","S8OvJMOiNcOT","wqPCoH3Cs8OEwp7DqMO+VMKr","fsO2w43CosOow5TCvXLDjk8=","cFduwpobw6UzwrhEwoI=","woYhQ0J+woHCkwc0aMOKwoHCgQ==","a3vClyjDtw==","wqMmRm1w","OcOPw4U9w4RtJA==","SsKDIw==","DcKofzJgw5keJ8KiPw==","wpPDhk3CvizCrjFb","w7XDs8OAw60dw5Qtw70Jwo3Dvh3Diw==","Okcf","e8OPwrE=","IMOeHxQzwqBB","worCnsKqw6pHE8ORwqI=","N8OMw7c5w4R6Lg/Dkjw=","RjXDo8K2w4jDnVdQU2zDtcKoV0rCtg==","XsKjc3c4wq0gX0bDuDQ=","acKJRV0=","XHciQzDChjjDisOuP8K8w4ZP","w73DuwTCh19Ewq8=","w5bDm8K6wqdSU8OBw60Vw5jDmDTDpsKsw4lLUVsQH8KZw4PChsKrM1TDt3M=","fSrDhicY","F8KBwoN9w4oVLg==","dTzDiAvDu1oLLMOOw6TChA==","wqTCisK0w6pLEMOUwroHw5o=","WxTDoxozw4k=","wq05wrIjRmhWARhR","w6fDqMOLw7QOw4Enw6Y=","LMOhw5vCj18RP8K8wqBMAQ0V","L8Krfg==","W2c+","BcKXwqR/w4YIfg==","wosIF1ZXw7F0w70VKXAmw5E=","aHZ9wqgO","w5BpJg==","a3AsWhTCjD/DkMOAPw==","R1BgwoM/w680wqJqwoJcQwo=","w4vDqMO6w7AZw4Ug","aCHDvcK2w4TDnlJIfyY=","wqvCnsKQPyvCpw3CmsKmIg==","GT/Du3NXfCpVw5Bv","wo0mQFtWwonClg0=","TRHCqMOBCHTDosO7wpdb","bEonXyg=","wrAnSXEUwqJb","QcKKCw==","wr/CtGjCtcOIwpTCsg==","EsOcIBA/wrVJIMKpw77DmnLCnMOSBw==","wqwxaHUUwrRWwqjDuEc=","GsK7TMOBAkk=","c8KDXwB2Y8KX","woPDjsK7w4nDkcO2w4PDvcOZI8O4","wq/CqMKNw5dyWg==","F8O7bXcmMh7DuX3Cv0ZdJ0DDnw==","FcKwV8Oa","wqTCqC9gdyE7wrXCkcOB","woM8QV9Kwo3CnzUNb8Oe","bMKEDsKrM3nCn8KGw4En","esKIUlwAwqkVcg==","woEJOxXDpQ==","NH04w49hwqt2w6d6DQ==","fMOfwq0ZwpsGcVdAD8KAW15uCcOSMn9ww4/Dl1nCmcOowq7Dq15GWsKhw511wo0IWVtWwoM=","w6B4RcKJ","w4nDhyvCsxghJznCjho=","BGkpKCQ=","NsKlwo9sw5Q=","wpUSOg==","ScKZOARLw6PCocO4","w4/DozPCklZswqokTcKqw5g=","wp/CunjCosONwqHDp8OjScKsDw==","wqI/UFg/","w63DinURw4o=","w63DnCPCoRIhJB3CgAQ=","cyDDnhjDhg==","S0Rfwr8Z","w67DoA7Ckjw=","AsKUccOnNGnCgA==","wog1blMewrNewr3DvxvCoA==","woI/fmQdwopewr3DpB3Ctg==","wpw7Y2Mewr9ywqjDogbCp8OxJg==","wrDCumTCgMOEwoPDq8OyT8K3Dg==","SDLDqsKjw5XDiHxMfnjDgMKzTF0=","aS/Dt8KFw4TDglZMZWfDnA==","KMK7YitBw4MaI8KifyRoBMKj","W8OZI8OnaxxdKMKvfhbCtw==","wr/DklvCvizCpjBawoQTH8Obwp4DPcO+w47Ct2k=","w7vDgC/Cpgk2CCTClQYfIDQGw4B5XiQWJcOMOMKFw50=","w4k/QmR/wopCZcKWw77Cgg==","Hi/DqHNXdgVOw41gZQ==","Cj/DvGFXfBFPw55meQ==","UsO4A8OSWQ==","SjbDggrDsmU5LMOdw7nCmQ==","fiHDgwPDlHYJMMOZ","WMOBwqcawqsdfl5gF8KAW1I=","wqHDv3/Cgh/CkBBjwrU4Fw==","CcOmYGcqMCLDslDCoWRTIw==","wr8mX0p3wp3CiA==","eCjDrsKmw4TDn2hGZGfDhsKi","wpvDv8Owwq4s","dHXCvDPDi8KJwrTDuQ==","wp3DicK+w4jDmMOJw7LDu8OELcOyw7TCmw==","w77DgCXCqj4yKjjChA==","w6wxSVJ1wopVRA==","EsOuw4bClkwMNMKmwrpkIhQTVmHDlVk4w7E=","w7DDuMOPw6kSw4Ug","wqLDnFfCjTvCoD9KwoQEKg==","WcOyw5nCt8O4w4vCoEXDgRDCu3A=","HsOrZ2ohJxY=","worDhMKsw5jDj8OUw5vDhsOJIMOlw7bCgg==","FDPDj8OywoPDkQVoasORw4YwChc=","w71YeMKrKgF9wqnDnl8aZ8KjwoLCsjQ=","w5gGa8OfwqA9dw==","wqTCsG7Cs8OEwpTDgMO4ScKoFsKc","fMKXTRR6acO2w4LCnsKjeQ==","eXAvSzzCnyE=","HsKSwpZ4w6ACd1zDrj5i","wpcSLCXDncO4UEjCs1TDmA==","dXvCqxXDgcKDwqHDnnvDpVw=","csKJJgRHw6vCjMOzw6QMIQ==","w4TDjF0Xw5cjTiwGMTthw5c=","wqHCvX3Co8OEwp7DlcO4TsK3FMKN","wqXCisKJIj3ClgvCksKnKyrClQ==","eT3DhQPDtmMDN8OSw4DCk8OIYg==","RyTDvx7DsnIO","eGjClgHDgcKUwpY=","wrjCnsKVw65LBsOZ","w6lWbsKEIA1ZwoM=","w7vDkMOfw600","w7ECecOEwqcgIA==","wqAbDEl/w7Ep","Uk16wpwdw7Iu","w4fDgSXCsg8wLCM=","wp0wwq8g","WMKRXzl5","OcOaw7kgw4xpLgI=","bsOQPsO9aw==","dMOTw7rCmMOZw67CgEo=","w4jDh0kRw5ccfy4=","YsOiw4zCs8OFw4PCpg==","PsK7YjJqw54ONsKp","aCHDgxrDuGMTKMOZ","wrjCiMKpw7NDAsOTwr8=","AXk4w49hwqBew7RmX20=","esOEHsOCGMOmwp8=","Ukpuwoobw6UNwqNEwotJTgI=","w6fDtcOIw6QZw5IUw6AIwqfDowrDgw==","YnTDlsKPwoLDpMOrYw==","OcOaw6Mvw4RFIRY=","UsOfJMOxayl6Nw==","M0MUKzHDisO7","woMRIAnDqcO3QlTCgwTDh8O/w6vCrsK7woEAw55kCcOtwoDClUJAw4Q5AA3DssO3Rhh9ZsOYdSF/wrB9SEjDkFLCpMO8wpTClCszaFnCu8OZwqN1wqlJwpLDk2HCmnwQY1MbU8OHw50Lwqsyw4TDjMOXTcKLU8OHEMOMwqFcwrpWDMOFw7fCr8KGwpDClMOWwqbDkAQdwr3Ch8Ocw5IEwpxHwpjDmxtaZTfCli89NcKRTMO/VcOcBMKSwpnCn8OYw6VKw704U8KXKVfDo0QGwpsXw6TDr8KMwppMSzJrbcO4DDDDlMKeaCvDlUzClMOzwqofw51jHGvDrcOqwoBWIcOCw57Cq8O1TsOVL8OLw4sKM8OZKMOGw5/CpsKuwpXDnm1Awptww60GZsO2w4HCiz3DtWLDkMKGwpdOwqrDgxLCi19dwoxuesOpBMOiw77DsXfDvmLDtl7CnxDDlMOsw4LCk1HDsMO0UsOywoApecOQJizDhCfCjMOnKsK1MMOFwpR1woRNwqjDm8OlNFdZX2oIwqXDlsOrwpJswqvDm2HDncOtwpIwwr4nw5TCnQ/DhlHDj8OJwqEBwojDszjCqsO3w4XDolHDm8KVwpQOw6XCm0PCscOZwpbCo8KvPMO4b8KdMCZLVcOZPsO/S8OgL8ODw4fDin3CsC07wqY9woXDv8ObMFPCiMKBMMK6wqDChMKLwogrMy1HYMKyW8KzwrlHAcOewrMCw4LDrsKYwo7Ch8OS","bcKKBMKYM2XCm8KCw5tmwqo=","DMKUd8OhOGLDncOSw5PDgQ==","esOEC8OXH8OlwpLDpXrDssKFUg==","d8KpYXc4wo8xTkbDlD7DoGTDkA==","w6/DrSPChVNZw7g=","w5rDhUgBw5spKg==","wrk1aHUUwr95wqbDpBnCr8O9","JMOMw7Arw4R6FRXDnDVr","FFMFOg7DhMOy","w6hYecKiKgdcwqTDr0IP","AUMVKybDncODw6EYw68a","KcOtZG0qDx3DpFo=","w6wJwrnCtMK/wrwjcHNtwqnCpQ4=","wq3CtGTCrsOSwq/DrsO2VcKiEsKM","HsOHJQk3wrFMNsKFw4rDpWvCkA==","w6AtY2B/wpdn","wr0TBwvDpcOwUw==","wqQIHjHDu8OoVg==","Tw/CsMO3An7DisOB","OsKbbMOzMmPDmcKTw47Ck8Oywo1GwpLDlcK9IcOOw4QZMcOePcOsesKtwrcrw4hMwoJXd8OULlRfa8KywpjCvcKDw5gowr/DicOnLcK+wpPDicKiMCRpw68jw5LCgcKxw5xKw4ccHxIJQmpFFsOXwpLDsxrDundUw6tLBcOwwphGw5XDlkQRwrwgw7HCh2rCkBh2UwwJw4XDhGPCuTfCjQ/CmMKKQVhcwolhOTfDoMOPw4sqF8OxwphNw49abnFSdsOGw64BfwXDpsKmwr7DosKvw7fCm1t/PR4PXcOwU8K8wr7DjEtXw6vDo8KdDlHCozXCj8OrESjCu1U5w7/Cj1Z3w6wvAsKcwqlpDMK1wonDh8KQwqpXacOyFS7CmMKCJ2JJwrQ2Vn7DpcKdwr9JHMOQw5oNLmHDicKNccOkSsOIB8O5wpLCtnh+w4EAMBTCvxxZEMKtwo7CkmPCm3JBw55xTsKoQQ5RIcK1wrzCgkIMfUTClMKnw6PDhlVKwr/Crmltw4rDkcOtF2nCqcOy","GyHDo0VddhJv","w73DqEshw5U=","PsKFwpFmw40Ifg==","wrfCh8Kww7FEeyo=","w6/DrSPChVNZw78=","WsOyw4vCm8Osw5PCpnrDmE8=","HTfDjcOlwobDhkY=","w5HDoyLChVlEwrg=","w4lSYsK0LBB8","eG3CqgTDlsKSwpfDmQ==","wogVIjY=","RTzCg8OhHQ==","wp3DicKww5s=","w4fDkSXCqhAyJzQ=","bTbDhSAJ","BsKxQMObCVjDoMOq","bMKvYnAxwq0gWw==","UsOdJcOnfA15MsKpdjvCrMOcw7HDrRDCuMK/w4Y=","wrEtwrMya39N","K8KQY8O8M3TDpMOBw5LCgsO6wo9ewp7DgsKN","TcOlw5DCosOiw5PCrWPDhQ==","w6AUwovCoMK/wqsX","wrHDgMKnw4XDjsO4w4rDqMOFLcOlw7E=","wrjCncKVw65LBsOZ","bMK6RGIxwoUl","UTvDkicfw5BuGHnDucKHVw==","KGsZw4thwr17","w6Vcb8KvPDZnwrHDoFEPZg==","ZH/CtwXDgcKCwpvDi3TCog==","wp/Dv8Olwq4vCgHCixU2","wqMyXltaworCkxUbNQ==","OcOvc3cqMRvDoVHDtQ==","fcKDWQZ6aMOKw5DCkcO3","GkcTLSrDncK2","TMKJE8KxMw==","w48TwrfCpMK1wroKcnk=","w6HDrcONw6EIw4U=","wqPCs3nClsOS","w4oPwrHCtsK1wrweIm9rwrbCtA/CvMO3D2Q8VHATaFvCm8KbwqkowpjDpMOnwogvwrRPRcORwq0vOkZgM8ONXMOSMcK4LcKZw5jDocKuw4cFwrpYwp7DuB1BbMOiwpHCtcKQI8KVbFh7F1xhasOMe8OjQMOBwqnDt8KewrbDhcK7w5jCp33ClcK8w6rCrMOtw7MlMMKtw6rCg8OUw4FyGDExwrLDgELDkTPDh8O+VcOrw5w0woEURQAnecKcIsOkw4E3ZSUcGlbDjhjCosKqw51FwqoGBsKISQNawpUpw6zDu8O4CzPDocOVw4Yrw47DhE5Awp9DNUjDsBUrw5fCiXjDlMO8w4XCqB8pwrZow67CrsO8w7l2w6fDn8Osw7kaacKhw50Pw5VywovDqMO4bMKmCsKswqPDhsOETCJzw5XDl8KnDcOowp08woZdw4oJwpjCnsOkKidLwr8pQz3Cq8OzTWEzwoBAwoXDkUgxSsOjRcO7QQVRMMOZw5TCgXBsw68KwoEHQcOcwpTDsBEEw6zDlUgPMA==","UsK4Y2A9woI0X1HCsTrDt2jCkT8jwpR+woMtS8K+KcKNw7TCqDVAE1vCusO/w5Qod8OTw53DqcO4FcKswpE7VEQFwooDw4XCtXR0wopWwqYLcsKOwonDiBJFEMK9wpbDnzLDhV7ChcKVYFbDnQrCqMKvK2UhwpVwwpbCo1UEJsK9w73DnB1Mw4vChcOIwr7DrGgJByjCqMK+w6jDmzZSw7NLdcKHwoskw6DCiAxKw5daw5nDhsKHwoRQHiTCncK8w7vDucK7d3HDkAIKGSEiBWRSw5nDmVnCi8OaJMKXw78UwrvCocOwUVhUZ8Kmw5DDmcONwpJLYUrDjcKxEnVTGFhwacKbwol7w5RTRH7Di8OlDEVgwp5Uw7lewpDClVrDh8OnRgYfesK9wpjCjsOJIMKAw614GF7CgsOwGxbCp8OxCMKfM8KRc8Odw78jGhLDr3NKbVbDlsKEw7zClnXChT7DqMKYOkXDunLDkMODwptyJXYaQ8OyZ8KAYyRILiHDqgrDt8KPw6PDqyzDnMKZRV3CkMKcwqvDpcKyw4kBwqHCkMORwr3CnSZ7UScQIVFOGy4wIgjDpMOIQcOvaBluGG7DkSpWwqfDhsKIUcKHRMOXw4F/CnMzwoXDhR4Mwr9KWytqIQzDmsOUWcOvQCNRNWBRQcOEw6t4w4lLR8O7NcKGE8OLP8KOZw3CqcO+LcOvwoo=","w5hVECwG","woHCtSdnPCA6wqnCjMOMwovCl8Oyw7VwP8OEw4jDlsKwwokLMxXDlcKmwoTDsMKwwoYBQsO4woIqw4jDrMOhfBpQwqZJdsOZw4QbAzPDhV7DtANhWsOlw7vCilPDoRhSwpctdUvDrCbDrn0PFMKYNirCgcORw48kQhUAYsKXw6bCmsOgT2YBV8Olw5XCoMKZDWLCqMKaecO4JSZ6CzF0wrbDmsOuN8K6H0J8SGXCiyI=","YnPCrT/Dpg==","wrHDpMOVwrUe","w6DDtcOAw7NSw5Mrw6cVwqPDtBjCjsKBNBA/UFEIRcKoLcK+w5jDuk5WH8OAw6rDpkHCnEvDqcOHVsOAD8OBwoHCgyQcHSjCvE3Cgw==","bxDCu8OcA2E=","fSvCoMOGAA==","Q8OHwrMWwqk=","BcOLw6A=","wo/Cg8KQw6lI","V8KEOwc=","w7/DrsObw7Yt","eMO8wqUwwr4=","w6XDk2sAw7o=","wpjCsipx","wr0bwoUZZih7","yjzksjiPqami.cfomY.vFU6WOEkzR=="],r=(e=s,u=225,++u),i=57600,a=void 0,n=void 0;if((i>>=8)<r){for(;--r;)n=e.shift(),i===r&&1==="‮".length?(i=n,a=e.pop()):i&&a.replace(/[yzkPqfYFUWOEkzR=]/g,"")===i&&e.push(n);e.push(e.shift())}function g(e,i){e=~~"0x".concat(e.slice(1));var t=s[e];void 0===g.mYDTtO&&(function(){var e="undefined"!=typeof window?window:"object"==typeof process&&"function"==typeof require&&"object"==typeof global?global:this;e.atob||(e.atob=function(e){for(var i,t,r=String(e).replace(/=+$/,""),s=0,a=0,o="";t=r.charAt(a++);~t&&(i=s%4?64*i+t:t,s++%4)&&(o+=String.fromCharCode(255&i>>(-2*s&6))))t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(t);return o})}(),g.jbNkXn=function(e,i){for(var t,r=[],s=0,a="",o="",n=0,l=(e=atob(e)).length;n<l;n++)o+="%"+("00"+e.charCodeAt(n).toString(16)).slice(-2);e=decodeURIComponent(o);for(var u=0;u<256;u++)r[u]=u;for(u=0;u<256;u++)s=(s+r[u]+i.charCodeAt(u%i.length))%256,t=r[u],r[u]=r[s],r[s]=t;for(var u=0,s=0,w=0;w<e.length;w++)s=(s+r[u=(u+1)%256])%256,t=r[u],r[u]=r[s],r[s]=t,a+=String.fromCharCode(e.charCodeAt(w)^r[(r[u]+r[s])%256]);return a},g.jHuSuV={},g.mYDTtO=!0);var r=g.jHuSuV[e];return void 0===r?(void 0===g.uyyCcu&&(g.uyyCcu=!0),t=g.jbNkXn(t,i),g.jHuSuV[e]=t):t=r,t}function o(e){var i={jLwRg:g("‫0","CoNO"),YXJTp:function(e,i,t){return e(i,t)}},t=(Cesium[g("‫1","AudB")],Cesium[g("‫2","gLr#")],Cesium[g("‮3","7&%j")]);Cesium.defined,Cesium.destroyObject,Cesium[g("‮4","#G4e")],Cesium.GeometryPipeline,Cesium[g("‮5","Bq$[")];let r=Cesium[g("‮6","N&2(")],s=(Cesium.Transforms,Cesium[g("‮7","gpyp")],Cesium[g("‫8","Xmhg")],Cesium[g("‮9","y&T]")],Cesium.DrawCommand);Cesium.loadCubeMap,Cesium[g("‮a","009s")],Cesium[g("‮b","y&T]")],Cesium.BlendingState,Cesium[g("‫c","Bd^g")],Cesium[g("‮d","^UOt")],Cesium.ShaderSource,this[g("‮e","RmGw")]=!1,this[g("‫f","#K[[")]=!1,this[g("‫10","h(q)")]=.5,this[g("‫11","CoNO")]=this[g("‮12","dHii")]=0,this[g("‫13","H%^z")]=g("‮14","gLr#"),this[g("‫15","OJE)")]=i[g("‮16","N&2(")],Cesium[g("‮17","JBP]")](Cesium.Matrix4.getRotation)||(Cesium[g("‫18","cv&I")].getRotation=Cesium[g("‫19","Bq$[")][g("‫1a","ktuU")]),this.skyboxMatrix3=new Cesium[g("‮1b","6^y&")],this[g("‫1c","Bq$[")]=e[g("‫1d","009s")],this[g("‫1e","AP[Z")]=void 0,this[g("‫1f","dHii")]=i[g("‫20","H%^z")](t,e[g("‮21","L8HW")],!0),this[g("‮22","L%)L")]=new s({modelMatrix:r[g("‫23","Yz!u")](r[g("‮24","gLr#")]),owner:this}),this[g("‮25","#G4e")]=void 0,this[g("‮26","4Q*q")]=void 0,this[g("‫27","&LlE")]=void 0}Object[g("‫28","gLr#")](o[g("‮29","ktuU")],{USpeed:{get:function(){return this._uSpeed},set:function(e){this[g("‫2a","^UOt")]=e,this[g("‫2b","L8HW")]=!0}},VSpeed:{get:function(){return this[g("‮2c","HiCP")]},set:function(e){this[g("‫2d","#G4e")]=e,this[g("‮2e","Yz!u")]=!0}},WSpeed:{get:function(){return this[g("‫2f",")SV*")]},set:function(e){this._wSpeed=e,this[g("‮30","009s")]=!0}}});var b=new Cesium[g("‮31","AP[Z")],O=new Cesium[g("‫32","pv1S")],M=new Cesium[g("‫33","k[A%")],y=new Cesium[g("‫34","Bd^g")],v=new Cesium.Cartesian3(1,1,1),k=new Cesium.Quaternion,K=new Cesium[g("‮35","IDuK")],P=0,T=Cesium[g("‮36","y&T]")].IDENTITY[g("‮37","AudB")](new Cesium[g("‮36","y&T]")]),u=(o[g("‮38","^UOt")][g("‫39","3R[[")]=function(t,l){var r={ksrvQ:function(e,i){return e!==i},BQQse:"XKzjT",PDhTl:g("‫3a","RmGw"),rYeyU:"11|0|2|8|4|6|1|5|12|10|3|9|7",ndZDm:function(e,i){return e*i},LeRYS:function(e,i){return e/i},CujBO:function(e,i){return e*i},XWREz:function(e,i){return e/i},pFipP:function(e,i){return e*i},vRDUA:"jfPQg",fooYb:g("‫3b","^UOt"),oMvmH:g("‮3c","#G4e"),fstKf:function(e,i,t){return e(i,t)},bQgDq:g("‮3d","dE4K"),rwWsH:function(e,i){return e!==i},dpNZM:function(e,i){return e===i},bgPkA:"mQSba",iVeae:g("‮3e","()&d"),mZTMM:function(e,i){return e!==i},MoJYN:function(e,i){return e!==i},YgFhs:g("‮3f","AP[Z"),fUFdT:g("‮40","pv1S"),uCeMw:g("‮41","3R[["),YSQMe:g("‫42","H%^z"),DROKe:"xYhWd",vVzOD:g("‮43","H%^z"),ITrFp:function(e,i){return e/i},lExcw:function(e,i){return e*i},VOjqY:function(e,i){return e/i},SONwg:function(e,i){return e/i},THLCv:g("‫44","@D2n"),znIbx:"YbueF",jCqpV:function(e,i){return e!==i},Gagtf:g("‫45","i4F["),XZYim:g("‫46","HiCP")};const i=this;if(this[g("‫47","YTsK")]){if((!r[g("‮4a","N&2(")](t[g("‫4b","()&d")],Cesium[g("‫c","Bd^g")][g("‮4c","&LlE")])||t.mode===Cesium[g("‫4d","YTsK")].MORPHING)&&t[g("‮4e","#G4e")].render){var e=t[g("‮4f","7&%j")];if(r.rwWsH(this[g("‮50","HiCP")],this[g("‮51","IDuK")]))if(r[g("‫52","H%^z")](r[g("‫53","AudB")],g("‫54","ftbA"))){this[g("‮55","Bd^g")]=this.sources;var s=this.sources;if(!(Cesium[g("‫56","Bq$[")](s[g("‮57","i4F[")])&&Cesium[g("‫58","CoNO")](s[g("‮59","AudB")])&&Cesium[g("‫56","Bq$[")](s[g("‫5a","y&T]")])&&Cesium[g("‫5b","@EVl")](s.negativeY)&&Cesium.defined(s.positiveZ)&&Cesium[g("‫5b","@EVl")](s[g("‮5c","^UOt")])))throw new DeveloperError(r[g("‫5d","#G4e")]);if(typeof s[g("‫5e","Bu3w")]!=typeof s[g("‮5f","I$hD")]||r[g("‫60","pv1S")](typeof s[g("‮61","y&T]")],typeof s.positiveY)||typeof s[g("‫62","L%)L")]!=typeof s[g("‮63","YTsK")]||r[g("‮64","()&d")](typeof s[g("‮65","YTsK")],typeof s[g("‫66","dHii")])||r[g("‫67","oS9t")](typeof s.positiveX,typeof s.negativeZ)){if(r[g("‮68","#K[[")](r.YgFhs,r.fUFdT))throw new DeveloperError(r[g("‫69","gLr#")]);i[g("‫6a","Bq$[")]=i[g("‮6b","dE4K")]&&i[g("‫6c","3R[[")][g("‮6d",")SV*")](),i._cubeMap=cubeMap}typeof s.positiveX===r[g("‫6e","6^y&")]?Cesium[g("‮6f","L%)L")](e,this[g("‫70","$KrK")])[g("‮71","@D2n")](function(e){r[g("‫72","h(q)")](r[g("‫73","()&d")],r.PDhTl)?(i[g("‮74","AVV*")]=i[g("‫75","JBP]")]&&i[g("‮76","i4F[")][g("‫77","()&d")](),i._cubeMap=e):(this._wSpeed=u,this[g("‮30","009s")]=!0)}):(this._cubeMap=this._cubeMap&&this[g("‮78","gpyp")][g("‮6d",")SV*")](),this[g("‫79","HiCP")]=new Cesium[g("‮7a","Yz!u")]({context:e,source:s}))}else Cesium[g("‫7b","Yz!u")](e,this[g("‮7c","I$hD")])[g("‮7d","xqM8")](function(e){i[g("‫6a","Bq$[")]=i._cubeMap&&i[g("‫7e","CoNO")][g("‮7f","#K[[")](),i[g("‮80","AudB")]=e});const w=this[g("‮81","cv&I")];if(w[g("‮82","6^y&")]=Cesium.Transforms[g("‫83","#K[[")](t[g("‮84","AP[Z")]._positionWC),i[g("‮85","@D2n")])if(r[g("‫86","ktuU")](r[g("‫87","Bq$[")],r[g("‫88","^UOt")]))for(var c=r[g("‫89","dHii")][g("‫8a","dHii")]("|"),C=0;;){switch(c[C++]){case"0":var a=Cesium[g("‮8b","i4F[")][g("‮8c","gpyp")](w.modelMatrix,Cesium[g("‮8d","7&%j")].UNIT_X,O),m=Cesium[g("‮8e","AVV*")][g("‫8f","i4F[")](w[g("‮90","AP[Z")],Cesium[g("‫91","@EVl")].UNIT_Y,M);continue;case"1":p=Cesium.Quaternion.fromAxisAngle(a,r[g("‫92","Bu3w")](i[g("‫93","I$hD")],performance.now())/1e5);continue;case"2":var p=Cesium.Matrix4[g("‮94","^UOt")](w[g("‮95","oS9t")],Cesium.Cartesian3[g("‫96","7&%j")],y);continue;case"3":K=Cesium[g("‮97","RmGw")].computeAxis(o,K);continue;case"4":m=Cesium[g("‫98","ktuU")].subtract(m,o,M);continue;case"5":a=Cesium[g("‫99","@EVl")][g("‮9a","k[A%")](m,r[g("‫9b","AP[Z")](r[g("‫9c","k[A%")](i[g("‮9d","Xmhg")],performance[g("‮9e","YTsK")]()),1e5));continue;case"6":o=Cesium[g("‫9f","oS9t")][g("‫a0","ftbA")](p,o,y);continue;case"7":i[g("‫a1","3R[[")]=!1;continue;case"8":a=Cesium.Cartesian3.subtract(a,o,O);continue;case"9":P=Math.max(Math[g("‫a2","y&T]")](Math.abs(0),Math[g("‮a3","@D2n")](0)),Math.abs(this[g("‮a4","#K[[")]));continue;case"10":o=Cesium.Quaternion[g("‮a5","HiCP")](p,Cesium[g("‮a6","Xmhg")].multiply(a,o,k),k);continue;case"11":var o=Cesium.Matrix4[g("‫a7","AVV*")](w[g("‮a8","#G4e")],Cesium.Cartesian3[g("‮a9","#G4e")],b);continue;case"12":o=Cesium.Quaternion[g("‮aa","YfkD")](o,r.XWREz(r.pFipP(i[g("‫ab","Bq$[")],performance.now()),1e5));continue}break}else for(var d=g("‮ac","HiCP")[g("‮ad","Yz!u")]("|"),D=0;;){switch(d[D++]){case"0":var h=Cesium[g("‫ae","JBP]")].multiplyByPoint(w[g("‫af","I$hD")],Cesium[g("‮b0","HiCP")][g("‮b1","Yz!u")],y);continue;case"1":u=Cesium[g("‮b2","&LlE")][g("‮b3","3R[[")](h,u,y);continue;case"2":i[g("‮b4","i4F[")]=!1;continue;case"3":P=Math.max(Math.max(Math[g("‮b5","oS9t")](0),Math[g("‮b6","YfkD")](0)),Math.abs(this[g("‫b7","JBP]")]));continue;case"4":n=Cesium.Quaternion[g("‮b8","$KrK")](f,r[g("‮b9","@EVl")](r.lExcw(i._vSpeed,performance[g("‮ba","dE4K")]()),1e5));continue;case"5":h=Cesium[g("‫bb","YfkD")][g("‫bc","@EVl")](n,i[g("‮bd","3R[[")]*performance.now()/1e5);continue;case"6":n=Cesium[g("‫be","AVV*")].subtract(n,u,O);continue;case"7":u=Cesium[g("‫bf","nV#o")].multiply(h,Cesium[g("‮c0","OJE)")][g("‮c1","k[A%")](n,u,k),k);continue;case"8":u=Cesium[g("‮c2","H%^z")].fromAxisAngle(u,r[g("‫c3","YfkD")](i[g("‫c4","gpyp")]*performance[g("‫c5","AudB")](),1e5));continue;case"9":var n=Cesium[g("‫c6","RmGw")][g("‫c7","#K[[")](w.modelMatrix,Cesium[g("‮c8","gpyp")][g("‮c9","gLr#")],O),f=Cesium[g("‮ca","IDuK")].multiplyByPoint(w[g("‫cb","L8HW")],Cesium[g("‮b0","HiCP")][g("‮cc","cv&I")],M);continue;case"10":var u=Cesium.Matrix4[g("‮cd","Bd^g")](w.modelMatrix,Cesium.Cartesian3[g("‮ce","gLr#")],b);continue;case"11":K=Cesium[g("‫cf","()&d")][g("‮d0","k[A%")](u,K);continue;case"12":f=Cesium[g("‫d1","AudB")].subtract(f,u,M);continue}break}if(u=Cesium[g("‫19","Bq$[")][g("‮d2","#G4e")][g("‫d3","CoNO")](T),Cesium[g("‮b0","HiCP")].equals(K,Cesium[g("‫d4",")SV*")].ZERO)||(u=Cesium.Matrix4[g("‫d5","@D2n")](Cesium.Cartesian3[g("‫d6","009s")],Cesium[g("‫d7","L%)L")][g("‮aa","YfkD")](K,r[g("‮d8","y&T]")](r[g("‫d9","JBP]")](P,performance[g("‮da","dHii")]()),1e5)),v,T),Cesium.Matrix4[g("‫db","YTsK")](u,w[g("‫dc","Bq$[")],w[g("‮dd","RmGw")]))){if(r[g("‮de","gpyp")](r.THLCv,r[g("‮df","N&2(")])){if(Cesium.defined(w.vertexArray)||(w[g("‮e0","L%)L")]={u_cubeMap:function(){return r[g("‮e1","I$hD")](g("‫e2","@EVl"),r[g("‮e3","L%)L")]),i._cubeMap},u_rotateMatrix:function(){return Cesium[g("‫e4","gLr#")][g("‮e5","gpyp")](w[g("‮e6","gpyp")],i[g("‫e7","gpyp")])}},s=Cesium[g("‫e8","RmGw")][g("‮e9","AVV*")](Cesium[g("‮ea","AVV*")][g("‫eb","oS9t")]({dimensions:new Cesium[g("‫34","Bd^g")](2,2,2),vertexFormat:Cesium[g("‮ec","4Q*q")].POSITION_ONLY})),t=this[g("‮ed","ftbA")]=Cesium.GeometryPipeline[g("‫ee","L%)L")](s),w[g("‫ef","h(q)")]=Cesium[g("‫f0","OJE)")].fromGeometry({context:e,geometry:s,attributeLocations:t,bufferUsage:Cesium[g("‮f1","OJE)")][g("‫f2","4Q*q")]}),w.renderState=Cesium[g("‮f3","I$hD")][g("‮f4","I$hD")]({blending:Cesium[g("‫f5","@D2n")][g("‮f6","ftbA")]})),Cesium.defined(w[g("‮f7","Bd^g")])&&!r.jCqpV(this[g("‫f8","k[A%")],l)||(s=new Cesium[g("‫f9","AVV*")]({defines:[l?r[g("‫fa","pv1S")]:""],sources:[i[g("‮fb","AP[Z")]]}),w[g("‫fc","L8HW")]=Cesium.ShaderProgram[g("‮fd","L%)L")]({context:e,vertexShaderSource:i[g("‫fe","h(q)")],fragmentShaderSource:s,attributeLocations:this[g("‫ff","i4F[")]}),this[g("‫f8","k[A%")]=l),!Cesium[g("‫100","3R[[")](this._cubeMap)){if("VJFcH"!==r.XZYim)return;{Cesium[g("‫101","ftbA")],Cesium.Cartesian3;t=Cesium[g("‮102","ktuU")];Cesium[g("‮103","Bd^g")],Cesium[g("‫104","L8HW")],Cesium[g("‫105","6^y&")],Cesium[g("‫106","009s")],Cesium[g("‮107","Bu3w")];let e=Cesium.Matrix4,i=(Cesium.Transforms,Cesium[g("‮108","RmGw")],Cesium[g("‮109","IDuK")],Cesium[g("‮10a","YfkD")],Cesium[g("‫10b","JBP]")]);Cesium[g("‮10c","dHii")],Cesium[g("‫10d","AP[Z")],Cesium[g("‫10e","YTsK")],Cesium.BlendingState,Cesium.SceneMode,Cesium[g("‮10f","N&2(")],Cesium[g("‮110","RmGw")],this[g("‮111","nV#o")]=!1,this[g("‫112","I$hD")]=!1,this[g("‫113","I$hD")]=.5,this[g("‫114","AP[Z")]=this[g("‮115","HiCP")]=0,this.SkyBoxFS=r.fooYb,this[g("‫116","009s")]=r[g("‮117","3R[[")],Cesium[g("‮118","Bu3w")](Cesium[g("‫e4","gLr#")].getRotation)||(Cesium[g("‮ca","IDuK")].getRotation=Cesium[g("‮119","$KrK")].getMatrix3),this.skyboxMatrix3=new Cesium.Matrix3,this.sources=options[g("‮11a","@EVl")],this[g("‫11b","L%)L")]=void 0,this[g("‮11c","&LlE")]=r[g("‫11d","IDuK")](t,options.show,!0),this[g("‫11e","Xmhg")]=new i({modelMatrix:e[g("‮11f","4Q*q")](e[g("‮120","ktuU")]),owner:this}),this[g("‮121","N&2(")]=void 0,this._attributeLocations=void 0,this[g("‫122","ktuU")]=void 0}}return w}return!1}}}else r[g("‮48","3R[[")](r.bQgDq,r[g("‮49","@D2n")])},o[g("‮123","oS9t")].isDestroyed=function(){return!1},o[g("‮124","I$hD")].destroy=function(){const e=this[g("‮125","HiCP")];return e.vertexArray=e[g("‫126",")SV*")]&&e.vertexArray[g("‮127","7&%j")](),e.shaderProgram=e[g("‫128","@EVl")]&&e[g("‮129","3R[[")].destroy(),this[g("‮12a","xqM8")]=this[g("‮12b","Xmhg")]&&this[g("‮12c","4Q*q")][g("‮12d","y&T]")](),destroyObject(this)},{defaultSkyBox:null,currentSkyBox:null,CreateLabelMarkerPoint(e,o,i=!1){if(!e&&Array.isArray(e)&&3===e.length)throw"标注点必须要传入坐标数据，且长度为3";let[n,u,w]=e,l=new(180<Math.abs(n)?Cesium.Cartesian3:Cesium.Cartesian3.fromDegrees)(n,u,w),c={};if(o){e=o.offsets,e=new Cesium.Cartesian2(e[0],e[1])||new Cesium.Cartesian2(0,0);if(c.text=o.text||"",c.font=o.font||"",c.showBackground=!1,c.style=i?Cesium.LabelStyle.FILL_AND_OUTLINE:Cesium.LabelStyle.FILL,c.pixelOffset=e,c.fillColor=o.fillColor||Cesium.Color.WHITE,i){let i=o.fillColor||Cesium.Color.WHITE,t=!1,r=Cesium.Math.randomBetween(.01,.05),e=(c.outlineColor=new Cesium.CallbackProperty(function(){let e=i.alpha;return t&&0<=e?e-=r:(e+=r,t=1<=e),i.alpha=e,i},!1),c.outlineWidth=o.outlineWidth||2,0),s=!1,a=Cesium.Math.randomBetween(.1,.4);l=new Cesium.CallbackProperty(function(){return i.alpha,s&&0<=e?e-=a:(e+=a,s=8<=e),new Cesium.Cartesian3.fromDegrees(n,u,w+e)},!1)}c.scaleByDistance=new Cesium.NearFarScalar(1e3,1.2,1e4,1),c.pixelOffsetScaleByDistance=new Cesium.NearFarScalar(3e3,1,5e4,0),c.eyeOffset=o.eyeOffset?new Cesium.Cartesian3(0,o.eyeOffset,0):void 0,c.distanceDisplayCondition=new Cesium.DistanceDisplayCondition(0,15e3)}return new Cesium.Entity({position:l,label:c})},SwitchCustomSkyBox:function(i,e,t,r=!1){let s=this;s.defaultSkyBox||(s.defaultSkyBox=i.scene.skyBox),s.currentSkyBox=null;function a(){var e=i.camera.position;Cesium.Cartographic.fromCartesian(e).height<6e3?i.scene.skyBox=s.currentSkyBox:i.scene.skyBox=s.defaultSkyBox}if(e)try{switch(t){case"blue":s.currentSkyBox=new o({sources:{positiveX:require("GeniusWorld/Asset/skybox/bluesky/Right.jpg"),negativeX:require("GeniusWorld/Asset/skybox/bluesky/Left.jpg"),positiveY:require("GeniusWorld/Asset/skybox/bluesky/Front.jpg"),negativeY:require("GeniusWorld/Asset/skybox/bluesky/Back.jpg"),positiveZ:require("GeniusWorld/Asset/skybox/bluesky/Up.jpg"),negativeZ:require("GeniusWorld/Asset/skybox/bluesky/Down.jpg")}}),s.currentSkyBox.animationMove=r;break;case"sunset":s.currentSkyBox=new o({sources:{positiveX:require("GeniusWorld/Asset/skybox/dusksky/Right.jpg"),negativeX:require("GeniusWorld/Asset/skybox/dusksky/Left.jpg"),positiveY:require("GeniusWorld/Asset/skybox/dusksky/Front.jpg"),negativeY:require("GeniusWorld/Asset/skybox/dusksky/Back.jpg"),positiveZ:require("GeniusWorld/Asset/skybox/dusksky/Up.jpg"),negativeZ:require("GeniusWorld/Asset/skybox/dusksky/Down.jpg")}}),s.currentSkyBox.animationMove=r;break;case"moon":s.currentSkyBox=new o({sources:{positiveX:require("GeniusWorld/Asset/skybox/starrysky/px1.png"),negativeX:require("GeniusWorld/Asset/skybox/starrysky/nx1.png"),positiveY:require("GeniusWorld/Asset/skybox/starrysky/py1.png"),negativeY:require("GeniusWorld/Asset/skybox/starrysky/ny1.png"),positiveZ:require("GeniusWorld/Asset/skybox/starrysky/pz1.png"),negativeZ:require("GeniusWorld/Asset/skybox/starrysky/nz1.png")}});break;case"default":i.scene.skyBox=defaultSkyBox}i.scene.postRender.removeEventListener(a),"default"!=t&&i.scene.postRender.addEventListener(a)}catch(e){}else i.scene.postRender.removeEventListener(a)},addbillboardrotate(e){var i;null!=e.billboard&&(e.addProperty("imageClock"),i=0,e.imageClock=setInterval(()=>{null!=e&&(i-=.1,(e.billboard.rotation=i)<0&&(i=60))},100))},SwitchBlockStage:function(e,i,t){let r=e.scene.postProcessStages.bloom,s={},a=!1,o=128,n=-.2,u=1,w=3.78,l=1;void 0!==t&&(s=t),r.enabled=Boolean(i),r.uniforms.glowOnly=void 0===s.glowOnly?Boolean(a):Boolean(s.glowOnly),r.uniforms.contrast=void 0===s.contrast?Number(o):Number(s.contrast),r.uniforms.brightness=void 0===s.brightness?Number(n):Number(s.brightness),r.uniforms.delta=void 0===s.delta?Number(u):Number(s.delta),r.uniforms.sigma=void 0===s.sigma?Number(w):Number(s.sigma),r.uniforms.stepSize=void 0===s.stepSize?Number(l):Number(s.stepSize)},createPolylineTrailLinkMaterial(e,i,t,r){return void 0===Cesium.PolylineTrailLinkMaterialProperty&&this.addPolylineTrailLinkMaterial(),new Cesium.PolylineTrailLinkMaterialProperty(e,i,t,r)},drawCorrugation(e){var i=e.x,t=e.y,r=e.color||"#3ec0ff",s=e.name||"波纹",a=e.duration||1e3,r=this.creatScanMaterial(Cesium.Color.fromCssColorString(r).withAlpha(.8),a);return[new Cesium.Entity({position:Cesium.Cartesian3.fromDegrees(i,t),name:s+1,ellipse:{semiMinorAxis:e.semiMinorAxis||138,semiMajorAxis:e.semiMajorAxis||138,material:r}}),new Cesium.Entity({position:Cesium.Cartesian3.fromDegrees(i,t),name:s+2,ellipse:{semiMinorAxis:e.semiMinorAxis2||275,semiMajorAxis:e.semiMajorAxis2||275,material:r}})]},creatScanMaterial(e,i,t){return void 0===Cesium.ScanLineMaterialPropertyEx&&this.addScanMaterial(),t?new Cesium.ScanLineMaterialPropertyEx({color:e,duration:i,image:t}):new Cesium.ScanLineMaterialPropertyEx({color:e,duration:i})},addScanMaterial(){var t=Cesium.Color.WHITE;function i(e){e=Cesium.defaultValue(e,Cesium.defaultValue.EMPTY_OBJECT),this._definitionChanged=new Cesium.Event,this._color=void 0,this._colorSubscription=void 0,this._image=void 0,this._imageSubscription=void 0,this._duration=void 0,this._durationSubscription=void 0,this._time=(new Date).getTime(),this.color=e.color,this.duration=e.duration,this.image=e.image}Object.defineProperties(i.prototype,{isConstant:{get:function(){return Cesium.Property.isConstant(this._color)&&Cesium.Property.isConstant(this._duration)}},definitionChanged:{get:function(){return this._definitionChanged}},color:Cesium.createPropertyDescriptor("color"),duration:Cesium.createPropertyDescriptor("duration"),image:Cesium.createPropertyDescriptor("image")}),i.prototype.getType=function(e){return"ScanlineMaterialEx"},i.prototype.getValue=function(e,i){return(i=!Cesium.defined(i)?{}:i).image=Cesium.Property.getValueOrUndefined(this._image,e),i.onlyColor=Cesium.defined(this._image)?0:1,i.color=Cesium.Property.getValueOrClonedDefault(this._color,e,t,i.color),i.duration=Cesium.Property.getValueOrDefault(this._duration,e,10,i.duration),i.time=((new Date).getTime()-this._time)%this.duration/this.duration,i},i.prototype.equals=function(e){return this===e||e instanceof i&&Cesium.Property.equals(this._color,e._color)&&Cesium.Property.equals(this._image,e._image)&&Cesium.Property.equals(this._duration,e._duration)},Cesium.ScanLineMaterialPropertyEx=i,Cesium.Material.ScanLineExType="ScanlineMaterialEx",Cesium.Material.ScanLineSource="float circle(vec2 uv, float r, float blur) {\n                    float d = length(uv) * 2.0;\n                    float c = smoothstep(r+blur, r, d);\n                    return c;\n                }\n                //uniform int onlyColor;\n                uniform vec4 color;\n                uniform float time;\n                czm_material colorScan(czm_materialInput materialInput)\n                {\n                    czm_material material = czm_getDefaultMaterial(materialInput);\n                    vec2 st = materialInput.st - .5;\n                    material.diffuse = color.rgb;\n                    material.emission = vec3(0);\n                    float t = time;\n                    float s = 0.5;\n                    float blur =0.04;\n                    float radius1 = smoothstep(.0, s, t) ;\n                    float alpha1 = circle(st, radius1, blur) * circle(st, radius1, -blur);\n                    float alpha2 = circle(st, radius1, blur - radius1) * circle(st, radius1, blur);\n                    float radius2 = 0.5 + smoothstep(s, 1.0, t);\n                    float alpha3 = circle(st, radius1, radius2 + blur - radius1) * circle(st, radius1, -blur);\n                    material.alpha = smoothstep(1.0, s, t) * (alpha1 + alpha2*0.1 + alpha3*0.1);\n                    material.alpha *= color.a;\n                    if (material.alpha < 0.005) {   \n                            discard ;\n                        }\n                    return material;\n                }\n                czm_material imageScan(czm_materialInput materialInput)\n                {\n                    czm_material material = czm_getDefaultMaterial(materialInput);\n                    vec2 st = materialInput.st - .5;\n                    float t = time;\n                    float s = 2.65*smoothstep(0.0, 1.0, t);\n                    vec2 newst = st*1.8/s+0.5;\n                    vec4 colorImage = texture2D(image, newst);\n                    material.alpha=0.0;\n                    if(length(newst.st-0.5)<time*0.5)\n                    //if(abs(newst.t-0.5)<time*0.5&&abs(newst.s-0.5)<time*0.5)\n                    {\n                        material.diffuse = color.rgb*colorImage.rgb;\n                        material.alpha =  color.a*colorImage.a;\n                    }\n                    material.emission = vec3(0);\n                    if (material.alpha < 0.005) {\n                     discard ;\n                        }\n                    return material;\n                }\n                czm_material czm_getMaterial(czm_materialInput materialInput)\n                {\n                    if(onlyColor>0.0)\n                        return colorScan(materialInput);\n                    else\n                    return imageScan(materialInput);\n                }",Cesium.Material._materialCache.addMaterial(Cesium.Material.ScanLineExType,{fabric:{type:Cesium.Material.ScanLineExType,uniforms:{image:Cesium.Material.DefaultImageId,color:Cesium.Color.WHITE,duration:10,time:0,onlyColor:1},source:Cesium.Material.ScanLineSource},translucent:!0})},addPolylineTrailLinkMaterial(){function i(e,i,t,r){this._definitionChanged=new Cesium.Event,this._color=void 0,this._colorSubscription=void 0,this.color=e,this.duration=i,this.repeat=r,this.trailImage=null!=t?t:"GeniusWorld/Asset/image/traillink.png",this._time=(new Date).getTime()}Object.defineProperties(i.prototype,{isConstant:{get:function(){return!1}},definitionChanged:{get:function(){return this._definitionChanged}},color:Cesium.createPropertyDescriptor("color")}),i.prototype.getType=function(e){return"PolylineTrailLink"},i.prototype.getValue=function(e,i){return(i=!Cesium.defined(i)?{}:i).color=Cesium.Property.getValueOrClonedDefault(this._color,e,Cesium.Color.WHITE,i.color),i.image=this.trailImage,i.time=((new Date).getTime()-this._time)%this.duration/this.duration,i.repeat=this.repeat,i},i.prototype.equals=function(e){return this===e||e instanceof i&&Cesium.Property.equals(this._color,e._color)},Cesium.PolylineTrailLinkMaterialProperty=i,Cesium.Material.PolylineTrailLinkType="PolylineTrailLink",Cesium.Material.PolylineTrailLinkImage="GeniusWorld/Asset/image/traillink.png",Cesium.Material.PolylineTrailLinkSource="czm_material czm_getMaterial(czm_materialInput materialInput)\n      {\n         czm_material material = czm_getDefaultMaterial(materialInput);\n         vec2 st = materialInput.st;\n         vec4 colorImage = texture2D(image, vec2(fract(st.s*repeat-time), fract(st.t)));\n         material.alpha = colorImage.a * color.a;\n         material.diffuse = color.rgb;\n         return material;\n      }",Cesium.Material._materialCache.addMaterial(Cesium.Material.PolylineTrailLinkType,{fabric:{type:Cesium.Material.PolylineTrailLinkType,uniforms:{color:new Cesium.Color(0,0,0,0),image:Cesium.Material.PolylineTrailLinkImage,time:0,repeat:10},source:Cesium.Material.PolylineTrailLinkSource},translucent:function(e){return!0}})},createWallFlowMaterial(e,i){return void 0===Cesium.WallFlowMaterialProperty&&this.addWallFlowMaterialcache(),new Cesium.WallFlowMaterialProperty({color:e,duration:i})},addWallFlowMaterialcache(){function i(e){e=Cesium.defaultValue(e,Cesium.defaultValue.EMPTY_OBJECT),this._definitionChanged=new Cesium.Event,this._color=void 0,this._colorSubscription=void 0,this.color=e.color,this.duration=e.duration,this._time=(new Date).getTime()}Object.defineProperties(i.prototype,{isConstant:{get:function(){return!1}},definitionChanged:{get:function(){return this._definitionChanged}},color:Cesium.createPropertyDescriptor("color")}),i.prototype.getType=function(e){return"WallFlowMaterialeffect"},i.prototype.getValue=function(e,i){return(i=!Cesium.defined(i)?{}:i).color=Cesium.Property.getValueOrClonedDefault(this._color,e,Cesium.Color.WHITE,i.color),i.image=Cesium.Material.WallFlowMaterialImage,i.time=((new Date).getTime()-this._time)%this.duration/this.duration,i},i.prototype.equals=function(e){return this===e||e instanceof i&&Cesium.Property.equals(this._color,e._color)},Cesium.WallFlowMaterialProperty=i,Cesium.Material.WallFlowMaterialType="WallFlowMaterialeffect",Cesium.Material.WallFlowMaterialImage="GeniusWorld/Asset/Image/fence.png",Cesium.Material.WallFlowMaterialSource="czm_material czm_getMaterial(czm_materialInput materialInput) { \n                            czm_material material = czm_getDefaultMaterial(materialInput); \n                            vec2 st = repeat * materialInput.st;\n                            // vec4 color = texture2D(image, materialInput.st/repeat); \n                            vec4 colorImage = texture2D(image, vec2(fract((axisY?st.t:st.s) - czm_frameNumber*speed/100.0), st.t));\n                            if(color.a == 0.0)\n                                {\n                                    material.alpha = colorImage.a;\n                                    material.diffuse = colorImage.rgb; \n                                }\n                                else\n                                {\n                                    material.alpha = colorImage.a * color.a;\n                                    material.diffuse = max(color.rgb * material.alpha * 3.0, color.rgb); \n                                }\n                            return material; \n                        }",Cesium.Material._materialCache.addMaterial(Cesium.Material.WallFlowMaterialType,{fabric:{type:Cesium.Material.WallFlowMaterialType,uniforms:{color:new Cesium.Color(1,0,0,0),image:Cesium.Material.WallFlowMaterialImage,repeat:new Cesium.Cartesian2(5,3),axisY:!0,speed:1,time:0},source:Cesium.Material.WallFlowMaterialSource},translucent:function(e){return!0}})},createLineMoveMaterial(e,i,t){return void 0===Cesium.PolylineFlowMaterialProperty&&this.addLineMoveMaterial(),new Cesium.PolylineFlowMaterialProperty({color:e,duration:i,trailLength:t})},addLineMoveMaterial(){var t=Cesium.Color.GREEN;function i(e){e=Cesium.defaultValue(e,Cesium.defaultValue.EMPTY_OBJECT),this._definitionChanged=new Cesium.Event,this._color=void 0,this._colorSubscription=void 0,this._duration=void 0,this._durationSubscription=void 0,this._trailLength=void 0,this._trailLengthSubscription=void 0,this._time=(new Date).getTime(),this.trailLength=e.trailLength,this.color=e.color,this.duration=e.duration}Object.defineProperties(i.prototype,{isConstant:{get:function(){return Cesium.Property.isConstant(this._color)&&Cesium.Property.isConstant(this._duration)&&Cesium.Property.isConstant(this._trailLength)}},definitionChanged:{get:function(){return this._definitionChanged}},color:Cesium.createPropertyDescriptor("color"),trailLength:Cesium.createPropertyDescriptor("trailLength"),duration:Cesium.createPropertyDescriptor("duration")}),i.prototype.getType=function(e){return"PolylineflowmoveLink"},i.prototype.isTranslucent=function(){return!0},i.prototype.update=function(){},i.prototype.getValue=function(e,i){return(i=!Cesium.defined(i)?{}:i).color=Cesium.Property.getValueOrClonedDefault(this._color,e,t,i.color),i.duration=Cesium.Property.getValueOrDefault(this._duration,e,10,i.duration),i.time=((new Date).getTime()-this._time)%this.duration/this.duration,i.trailLength=Cesium.Property.getValueOrDefault(this._trailLength,e,.2,i.trailLength),i},i.prototype.equals=function(e){return this===e||e instanceof i&&Cesium.Property.equals(this._color,e._color)&&Cesium.Property.equals(this._duration,e._duration)&&Cesium.Property.equals(this._trailLength,e._trailLength)},Cesium.PolylineFlowMaterialProperty=i,Cesium.Material.PolylineflowLinkType="PolylineflowmoveLink",Cesium.Material.PolylineflowLinkSource="uniform vec4 color;\n        uniform float duration;\n        uniform float time;\n        uniform float trailLength;\n        czm_material czm_getMaterial(czm_materialInput materialInput)\n        {\n            czm_material material = czm_getDefaultMaterial(materialInput);\n        vec2 st = materialInput.st;\n         float alpha =0.0;\n         float delta = trailLength;//(1.0/duration)*duration*0.1;\n        if(st.s>time && st.s < time+ delta)\n        {\n                    alpha =(st.s -time)/delta;\n            }\n            if (alpha < 0.005) {   \n                    discard ;\n                }\n            material.diffuse = color.rgb;\n        //material.emission = color.rgb;\n        material.alpha = alpha;\n        return material;\n        }",Cesium.Material._materialCache.addMaterial(Cesium.Material.PolylineflowLinkType,{fabric:{type:Cesium.Material.PolylineflowLinkType,uniforms:{color:new Cesium.Color(1,0,0,1),duration:10,trailLength:1,time:0},source:Cesium.Material.PolylineflowLinkSource},translucent:!0})},CreateDynamicGrowLight(r,t,e,s,i,a,l){let o=0,n=0,u=0,w=t*e;return new Cesium.Entity({name:"动态光柱",position:new Cesium.CallbackProperty(function(e,i){return i=i||new Cesium.Cartesian3(0,0,0),i=o>w?c.getNorthPointByDistance(r,0,0,w):(o+=w*s,c.getNorthPointByDistance(r,0,0,o))},!1),label:{text:new Cesium.CallbackProperty(function(e,i){return n>=t?n=t:n+=t*s,n.toFixed(0)},!1),font:"normal small-caps 16px 微软雅黑",style:Cesium.LabelStyle.FILL,fillColor:i,verticalOrigin:Cesium.VerticalOrigin.BOTTOM,pixelOffset:new Cesium.Cartesian2(-0,-20),distanceDisplayCondition:new Cesium.DistanceDisplayCondition(0,3e4)},polyline:{width:5,positions:new Cesium.CallbackProperty(function(e,i){let t=[];return t.push(r),i=i||new Cesium.Cartesian3(0,0,0),i=u>w?c.getNorthPointByDistance(r,0,0,w):(u+=w*s,c.getNorthPointByDistance(r,0,0,u)),t.push(i),t},!1),material:new Cesium.StripeMaterialProperty({orientation:Cesium.StripeOrientation.VERTICAL,oddColor:a,evenColor:l,offset:.5,repeat:1}),distanceDisplayCondition:new Cesium.DistanceDisplayCondition(0,3e4)}})},drawHeatmap(e,i){var t=e.viewer,r={west:e.bounds[0],south:e.bounds[2],east:e.bounds[1],north:e.bounds[3]},s=CesiumHeatmap.create(t,r,{radius:100,maxOpacity:.3,minOpacity:.05,blur:0,gradient:{0:"rgba(7,21,76,0.31)",.05:"rgba(23,28,109,0.33)","0.10":"#1e209a",.25:"#2e42ff",.35:"#3ca1ff",.45:"#62dcff",.55:"#acf7ff",.65:"#ffef68",.8:"#ffc864",.9:"#ff4c41"}});s.getCanvasByWGS84Data(e.minmax[0],e.minmax[1],e.heatPoint,e=>{e=new Cesium.Entity({show:!1,id:"CesiumHeatmap",rectangle:{coordinates:s._rectangle,material:new Cesium.ImageMaterialProperty({image:e,transparent:!0})}});"function"==typeof i&&i(e)})}});function t(e,i,t){this.path=i,this.planeparams=t,this.modelEntity=null,this.primitivesRay=null,this.earth=e,this.init()}return t.prototype.init=function(){let e=Promise.all([this.addScanRay(),this.addGLTFModel()]);e.then(()=>{this.earth.viewer.scene.primitives.add(this.primitivesRay),this.earth.viewer.entities.add(this.modelEntity)})},t.prototype.clearAll=function(){this.earth.viewer.scene.primitives.remove(this.primitivesRay),this.earth.viewer.entities.remove(this.modelEntity)},t.prototype.clearMicroPlane=function(){this.earth.viewer.entities.remove(this.modelEntity)},t.prototype.addScanRay=function(e,w,l,c,C,m,p,d,D){let h=this;return new Promise(function(e,i){const t=!0,r=!0,s=45,a=850,o=4e3,n=48,u=4;h.primitivesRay=new Cesium.ConeRayScanPrimitive({center:Cesium.Cartesian3.fromDegrees(116.655682,35.012745,400),show:w||t,zoom:l||r,angle:c?Cesium.Math.toRadians(c):Cesium.Math.toRadians(s),length:C||a,duration:m||o,lineCount:p||n,spinMultiple:d||u,color:D||Cesium.Color.fromCssColorString("#79e2ff").withAlpha(1)}),e()})},t.prototype.addGLTFModel=function(){let n=this;return new Promise(function(e,i){let t=new Cesium.SampledPositionProperty,r=Cesium.JulianDate.fromIso8601("2019-01-01T13:00:00"),s=Cesium.JulianDate.addSeconds(r,200,new Cesium.JulianDate);n.earth.viewer.clock.shouldAnimate=!1,n.earth.viewer.clock.startTime=r.clone(),n.earth.viewer.clock.stopTime=s.clone(),n.earth.viewer.clock.currentTime=r.clone(),n.earth.viewer.clock.clockRange=Cesium.ClockRange.LOOP_STOP,n.earth.viewer.clock.multiplier=1.5;var a=Cesium.Cartesian3.fromDegreesArrayHeights(n.path),o=200/(a.length-1);for(let e=0;e<a.length;e++)t.addSample(Cesium.JulianDate.addSeconds(r,o*e,new Cesium.JulianDate),a[e]);n.modelEntity=new Cesium.Entity({name:"gltf",position:new Cesium.CallbackProperty(function(){return n.primitivesRay.center=t.getValue(n.earth.viewer.clock.currentTime),n.primitivesRay.center},!1),label:{text:n.planeparams.text,font:"normal small-caps 14px 微软雅黑",fillColor:Cesium.Color.fromCssColorString("#ffffff").withAlpha(1),pixelOffset:new Cesium.Cartesian2(0,-20),scaleByDistance:new Cesium.NearFarScalar(100,1.5,5e3,1),showBackground:!0,backgroundColor:Cesium.Color.fromCssColorString("#343740").withAlpha(.6),backgroundPadding:new Cesium.Cartesian2(5,5),distanceDisplayCondition:new Cesium.DistanceDisplayCondition(0,15e3),disableDepthTestDistance:Number.POSITIVE_INFINITY},model:{uri:"GeniusWorld/Asset/models/microplane.gltf",scale:50,lightColor:new Cesium.Cartesian3(5,5,5)}}),e()})},{version:"V1.0",Utils:c,Effect:u,MicroPlane:t}});